import{o as s,c as a,a as t,w as F,v as B,F as p,r as x,t as g,b,d as D,u as I,e as E,f as o,g as $,h as k,i as f,j as C,k as M,l as q,n as H,m as j,p as y,q as G,s as A,x as P}from"./index-dbCKh3zP.js";import{h as N}from"./moment-UDURgb9g.js";import"./ar-sa-pDONzxrt.js";import{d as Y}from"./default-event-TthUPv4k.js";import{u as L}from"./useLiteraries-RjhiVWAN.js";const Q={class:"my-4 filters"},J={class:"scroller"},K=D('<option value="">كل الأوقات</option><option value="this_week">هذا الاسبوع</option><option value="next_week">الاسبوع القادم</option><option value="this_month">هذا الشهر</option><option value="next_month">الشهر القادم</option>',5),W=[K],X=t("option",{value:""},"كل الأنواع",-1),Z=["value"],ee={key:0,class:"fa-solid fa-th-large expand"},te={key:1,class:"fa-solid fa-list expand"},U={__name:"FilterComponent",props:{state:{type:Object,required:!0},map:{type:Boolean,default:!1},literaries:{type:Array,default:()=>[]}},setup(e){return(r,d)=>(s(),a("div",Q,[t("div",J,[F(t("select",{class:"form-select mx-2","aria-label":"Default select example","onUpdate:modelValue":d[0]||(d[0]=n=>e.state.filter.date_range=n)},W,512),[[B,e.state.filter.date_range]]),F(t("select",{class:"form-select mx-2","aria-label":"Default select example","onUpdate:modelValue":d[1]||(d[1]=n=>e.state.filter.type=n)},[X,(s(!0),a(p,null,x(e.literaries,n=>(s(),a("option",{key:n.id,class:"",value:n.id},g(`(${n.count}) - ${n.name}`),9,Z))),128))],512),[[B,e.state.filter.type]]),e.map?b("",!0):(s(),a("div",{key:0,onClick:d[2]||(d[2]=n=>e.state.view=e.state.view==="list"?"card":"list"),class:"expand d-block text-decoration-none"},[e.state.view==="list"?(s(),a("i",ee)):(s(),a("i",te))]))])]))}},se={class:"event1"},ae=["src"],ne={class:"dtails"},le={class:"title"},ie={key:0,class:"badge bg-brand text-light me-2"},oe=["innerHTML"],re={class:"d-flex justify-content-between align-items-center mt-3"},de={class:"partner"},ce=["src"],ue={class:"d-flex"},ve={key:0,class:"date text-end"},me={class:"ms-0"},ge=t("i",{class:"fa-regular fa-calendar-days ms-2"},null,-1),he=t("br",null,null,-1),be={class:"d-flex flex-row-reverse align-items-center"},_e=t("i",{class:"fa-regular fa-clock ms-2"},null,-1),fe={dir:"ltr"},ye={key:0,class:"d-flex align-items-center me-3"},$e=t("i",{class:"fa-solid fa-couch ms-2 text-danger"},null,-1),pe={key:1,class:"d-flex align-items-center me-3"},xe=t("i",{class:"fa-solid fa-couch ms-2 text-secondary"},null,-1),ke=t("div",{class:"atendees"},[t("div",{class:"number"}),t("div",{class:"actions"})],-1),O={__name:"EventList",props:{event:{type:Object,required:!0}},setup(e){const{getUser:r}=I();return(d,n)=>{var l,m,u,c,i,_,h;const v=E("router-link");return s(),a("div",se,[t("img",{class:"img",src:e.event.image?e.event.image:o(Y),alt:"image"},null,8,ae),t("div",ne,[t("div",null,[t("div",le,[$(v,{to:{name:"event-details",params:{id:e.event.id}},class:"fw-semibold"},{default:k(()=>[f(g(e.event.title??"N/A")+" ",1),o(r)&&e.event.goings.includes(o(r).id)?(s(),a("span",ie," محجوز ")):b("",!0)]),_:1},8,["to"]),t("div",{class:"text-muted small mt-2",innerHTML:e.event.description},null,8,oe)])]),t("div",re,[t("div",de,[t("img",{src:(m=(l=e.event)==null?void 0:l.partner)==null?void 0:m.logo,alt:"partner-logo"},null,8,ce),t("div",ue,[f(g(((c=(u=e.event)==null?void 0:u.partner)==null?void 0:c.name)??"N/A")+" ",1),t("span",null,g(((_=(i=e.event)==null?void 0:i.partner)==null?void 0:_.city)??"N/A"),1)])]),(h=e.event)!=null&&h.start_date?(s(),a("div",ve,[t("span",me,g(o(N)(e.event.start_date).format("DD-MM-YYYY")),1),ge,he,t("div",be,[_e,t("span",fe,g(o(N)(e.event.start_date).format("hh:mm A")),1),e.event.guest_count>=e.event.available_seats?(s(),a("div",ye,[f(" إنتهت "),$e])):(s(),a("div",pe,[f(g(e.event.available_seats-e.event.guest_count)+" ",1),xe]))])])):b("",!0)]),ke])])}}},qe={class:"event2"},Me={class:"title"},we={key:0,class:"badge bg-brand text-light me-2"},Ne=["src"],Ee={class:"dtails"},je={class:"d-flex justify-content-between align-items-center mt-3"},Ae={class:"partner"},Ce=["src"],Fe={class:"d-flex"},Be={class:"date text-end"},De={class:"ms-0"},Ie=t("i",{class:"fa-regular fa-calendar-days ms-2"},null,-1),Pe=t("br",null,null,-1),Ye={class:"d-flex flex-row-reverse align-items-center"},Le=t("i",{class:"fa-regular fa-clock ms-2"},null,-1),Ue={dir:"ltr"},Oe={key:0,class:"d-flex align-items-center me-3"},Re=t("i",{class:"fa-solid fa-couch ms-2 text-secondary"},null,-1),Se={key:1,class:"d-flex align-items-center me-3"},Te=t("i",{class:"fa-solid fa-couch ms-2 text-danger"},null,-1),Ve=t("div",{class:"atendees"},[t("div",{class:"number"}),t("div",{class:"actions"})],-1),R={__name:"EventCard",props:{event:{type:Object,required:!0}},setup(e){const{getUser:r}=I();return(d,n)=>{var l,m,u,c,i,_;const v=E("router-link");return s(),a("div",qe,[t("div",Me,[$(v,{to:{name:"event-details",params:{id:e.event.id}},class:"fw-semibold"},{default:k(()=>[f(g(e.event.title??"N/A")+" ",1),e.event.goings.includes(o(r).id)?(s(),a("span",we," محجوز ")):b("",!0)]),_:1},8,["to"])]),$(v,{to:{name:"event-details",params:{id:e.event.id}}},{default:k(()=>[t("img",{class:"img",src:e.event.image?e.event.image:o(Y)},null,8,Ne)]),_:1},8,["to"]),t("div",Ee,[t("div",je,[t("div",Ae,[t("img",{src:(m=(l=e.event)==null?void 0:l.partner)==null?void 0:m.logo,alt:"partner logo"},null,8,Ce),t("div",Fe,[f(g(((c=(u=e.event)==null?void 0:u.partner)==null?void 0:c.name)??"N/A")+" ",1),t("span",null,g(((_=(i=e.event)==null?void 0:i.partner)==null?void 0:_.city)??"N/A"),1)])]),t("div",Be,[t("span",De,g(o(N)(e.event.start_date).format("DD-MM-YYYY")),1),Ie,Pe,t("div",Ye,[Le,t("span",Ue,g(o(N)(e.event.start_date).format("hh:mm A")),1),e.event.guest_count<=e.event.available_seats?(s(),a("div",Oe,[f(g(e.event.available_seats-e.event.guest_count)+" ",1),Re])):(s(),a("div",Se,[f(" إنتهت "),Te]))])])]),Ve])])}}},ze={class:"tab-pane fade show active",id:"home-tab-pane",role:"tabpanel","aria-labelledby":"home-tab",tabindex:"0"},He={class:"my-4 d-flex justify-content-between align-items-center"},Ge=t("i",{class:"fa-solid fa-location-dot"},null,-1),Qe={key:0,class:"text-center my-4"},Je=t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),Ke=[Je],We={key:3,class:"alert alert-info text-center"},Xe={key:4,class:"text-center mt-4"},Ze=["disabled"],et={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},tt={role:"status"},st={__name:"Upcoming",props:{events:{type:Array,required:!0},loading:{type:Boolean,required:!0},loadingMore:{type:Boolean,required:!0},state:{type:Object,required:!0}},setup(e){const r=C(),d=M(),{data:n}=L("upcoming"),v=()=>{const l=d.query.pageN??1;r.push({query:{...d.query,pageN:Number(l)+1}})};return(l,m)=>{var c;const u=E("router-link");return s(),a("div",ze,[t("h2",He,[f(" فعاليات قريبة منك في جدة "),$(u,{to:{name:"event-map"},class:"btn btn-light"},{default:k(()=>[Ge,f(" عرض الخريطة")]),_:1})]),$(U,{state:e.state,literaries:(c=o(n))==null?void 0:c.data},null,8,["state","literaries"]),e.loading?(s(),a("div",Qe,Ke)):b("",!0),e.state.view==="list"&&!e.loading?(s(!0),a(p,{key:1},x(e.events,i=>(s(),q(O,{key:i.id,event:i},null,8,["event"]))),128)):e.state.view==="card"&&!e.loading?(s(!0),a(p,{key:2},x(e.events,(i,_)=>(s(),q(R,{key:i.index,event:i},null,8,["event"]))),128)):b("",!0),!e.loading&&!e.events.length?(s(),a("div",We," لا يوجد فعاليات متاحة حالياً ")):b("",!0),e.state.meta.total>e.events.length?(s(),a("div",Xe,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:m[0]||(m[0]=i=>v()),disabled:e.loadingMore||e.loading},[e.loadingMore?(s(),a("span",et)):b("",!0),t("span",tt,g(e.loadingMore?"جاري التحميل":"عرض المزيد"),1)],8,Ze)])):b("",!0)])}}},at={class:"tab-pane fade",id:"profile-tab-pane",role:"tabpanel","aria-labelledby":"profile-tab",tabindex:"0"},nt=t("h2",{class:"my-4 d-flex justify-content-between align-items-center"},[f(" فعاليات قريبة منك في جدة "),t("a",{href:"/events/map",class:"btn btn-light"},[t("i",{class:"fa-solid fa-location-dot"}),f(" عرض الخريطة")])],-1),lt={key:0,class:"text-center my-4"},it=t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),ot=[it],rt={key:3,class:"alert alert-info text-center"},dt={class:"text-center mt-4"},ct=["disabled"],ut={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},vt={role:"status"},mt={__name:"Past",props:{events:{type:Array,required:!0},loading:{type:Boolean,required:!0},loadingMore:{type:Boolean,required:!0},state:{type:Object,required:!0}},setup(e){const r=C(),d=M(),{data:n}=L("past"),v=()=>{const l=d.query.pageP??1;r.push({query:{...d.query,pageP:Number(l)+1}})};return(l,m)=>{var u;return s(),a("div",at,[nt,$(U,{state:e.state,literaries:(u=o(n))==null?void 0:u.data},null,8,["state","literaries"]),e.loading?(s(),a("div",lt,ot)):b("",!0),e.state.view==="list"&&!e.loading?(s(!0),a(p,{key:1},x(e.events,c=>(s(),q(O,{key:c.id,event:c},null,8,["event"]))),128)):e.state.view==="card"&&!e.loading?(s(!0),a(p,{key:2},x(e.events,(c,i)=>(s(),q(R,{key:c.index,event:c},null,8,["event"]))),128)):b("",!0),!e.loading&&!e.events.length?(s(),a("div",rt," لا يوجد فعاليات متاحة حالياً ")):b("",!0),t("div",dt,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:m[0]||(m[0]=c=>v()),disabled:e.loadingMore||e.loading},[e.loadingMore?(s(),a("span",ut)):b("",!0),t("span",vt,g(e.loadingMore?"جاري التحميل":"عرض المزيد"),1)],8,ct)])])}}},gt="/i/assets/event-08-rsnpQB_z.png",ht="/i/assets/event-09-pgwkdRdF.png",bt={id:"carouselExampleIndicators",class:"carousel slide","data-bs-ride":"carousel"},_t=t("div",{class:"carousel-indicators"},[t("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":"0",class:"active","aria-current":"true","aria-label":""}),t("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":"1","aria-label":""}),t("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":"2","aria-label":""})],-1),ft={class:"carousel-inner"},yt=["data-bs-interval"],$t=t("div",{class:"d-none text-white bg-dark px-3 py-2 position-absolute top-0 start-0 m-2 rounded shadow text-center"},null,-1),pt={key:1},xt={class:"carousel-item active text-center","data-bs-interval":"100000"},kt={class:"carousel-item"},qt=D('<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev"><span class="carousel-control-prev-icon" aria-hidden="true"></span><span class="visually-hidden">السابق</span></button><button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next"><span class="carousel-control-next-icon" aria-hidden="true"></span><span class="visually-hidden">التالي</span></button>',2),Mt={__name:"Carousel",props:{events:{type:Object,required:!0}},setup(e){const r=e;return(d,n)=>{const v=E("router-link");return s(),a("div",bt,[_t,t("div",ft,[r.events.length?(s(!0),a(p,{key:0},x(r.events,l=>(s(),a("div",{key:l.id,class:H(["carousel-item",{active:l.id===r.events[0].id}]),"data-bs-interval":l.id===r.events[0].id?"10000":"2000"},[$(v,{to:{name:"event-details",params:{id:l.id}}},{default:k(()=>[t("a",{class:"img",style:j({"background-image":`url(${l.image})`})},null,4)]),_:2},1032,["to"]),$t],10,yt))),128)):(s(),a("div",pt,[t("div",xt,[t("div",{class:"img",style:j({"background-image":`url(${o(gt)})`})},null,4)]),t("div",kt,[t("div",{class:"img",style:j({"background-image":`url(${o(ht)})`})},null,4)])]))]),qt])}}},wt=e=>{const r=M(),d=C(),n=y([]),v=y([]),l=y(!1),m=y(!1),u=G({carousel:[],view:"list",search:"أدبيات",filter:{date_range:r.query.date||"",type:r.query.type||""},meta:{}});A(()=>r.query.pageN,i=>{c(i)});const c=async(i,_=!0)=>{let h="";u.filter.date_range&&(h+="&date_range="+u.filter.date_range),u.filter.type&&(h+="&type="+u.filter.type);const{data:w,error:S,isFetching:Pt,onFetchResponse:T}=P("events/upcoming?page="+i+h).json();n.value.length===0?l.value=!0:m.value=!0,T(V=>{V.status===200&&(l.value=!1,m.value=!1,_?n.value=[...n.value,...w.value.data]:n.value=w.value.data,u.meta=w.value.meta,v.value=n.value.filter((z,Yt)=>!z.default_image).slice(0,3))})};return A(()=>u.filter,async(i,_)=>{let h={};i.date_range&&(h.date=i.date_range),i.type&&(h.type=i.type),h.pageN=1,await d.push({query:{...r.query,...h}}),await c(e.value,!1)},{deep:!0}),c(e.value),{events:n,loading:l,loadingMore:m,carousel:v,state:u}},Nt=e=>{const r=M(),d=y([]),n=y(!1),v=y(!1);A(()=>r.query.pageP,m=>{l(m)});const l=async m=>{const{data:u,error:c,isFetching:i,onFetchResponse:_}=P("events/past?page="+m).json();d.value.length===0?n.value=!0:v.value=!0,_(h=>{h.status===200&&(n.value=!1,v.value=!1,d.value=[...d.value,...u.value.data])})};return l(e.value),{events:d,loading:n,loadingMore:v}},Et={class:"home"},jt={class:"container wrapper mt-3"},At={class:"nav nav-tabs mt-4",id:"myTab",role:"tablist"},Ct={class:"nav-item",role:"presentation"},Ft={class:"nav-link active",id:"home-tab","data-bs-toggle":"tab","data-bs-target":"#home-tab-pane",type:"button",role:"tab","aria-controls":"home-tab-pane","aria-selected":"true"},Bt={class:"nav-item",role:"presentation"},Dt={class:"nav-link",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#profile-tab-pane",type:"button",role:"tab","aria-controls":"profile-tab-pane","aria-selected":"false"},It={class:"tab-content py-4",id:"myTabContent"},Tt={__name:"Events",setup(e){const r=M(),d=y(Number(r.query.pageN)||1),n=y(Number(r.query.pageP)||1),{events:v,loading:l,loadingMore:m,carousel:u,state:c}=wt(d),{events:i,loading:_,loadingMore:h}=Nt(n);return(w,S)=>(s(),a("div",null,[t("div",Et,[t("div",jt,[o(v).length?(s(),q(Mt,{key:0,events:o(u)},null,8,["events"])):b("",!0),t("ul",At,[t("li",Ct,[t("button",Ft," الفعاليات القادمة ("+g(o(v).length)+") ",1)]),t("li",Bt,[t("button",Dt," الفعاليات المنتهية ("+g(o(i).length)+") ",1)])]),t("div",It,[$(st,{events:o(v),loading:o(l),state:o(c),loadingMore:o(m)},null,8,["events","loading","state","loadingMore"]),$(mt,{events:o(i),loading:o(_),state:o(c),loadingMore:o(h)},null,8,["events","loading","state","loadingMore"])])])])]))}};export{Tt as default};
