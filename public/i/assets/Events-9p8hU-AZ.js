import{o as s,c as a,a as t,w as F,v as B,F as p,r as x,t as g,b,d as D,u as I,e as A,f as o,g as $,h as M,i as f,j as C,k as q,l as k,n as G,m as E,p as y,q as Q,s as j,x as P}from"./index-_3IUqo53.js";import{h as N}from"./moment-Zh_rDYzD.js";import"./ar-sa-4CptvSCB.js";import{d as Y}from"./default-event-TthUPv4k.js";import{u as U}from"./useLiteraries-nLvieqkx.js";const H={class:"my-4 filters"},J={class:"scroller"},K=D('<option value="">كل الأوقات</option><option value="this_week">هذا الاسبوع</option><option value="next_week">الاسبوع القادم</option><option value="this_month">هذا الشهر</option><option value="next_month">الشهر القادم</option>',5),W=[K],X=t("option",{value:""},"كل الأنواع",-1),Z=["value"],ee={key:0,class:"fa-solid fa-th-large expand"},te={key:1,class:"fa-solid fa-list expand"},O={__name:"FilterComponent",props:{state:{type:Object,required:!0},map:{type:Boolean,default:!1},literaries:{type:Array,default:()=>[]}},setup(e){return(r,d)=>(s(),a("div",H,[t("div",J,[F(t("select",{class:"form-select mx-2","aria-label":"Default select example","onUpdate:modelValue":d[0]||(d[0]=n=>e.state.filter.date_range=n)},W,512),[[B,e.state.filter.date_range]]),F(t("select",{class:"form-select mx-2","aria-label":"Default select example","onUpdate:modelValue":d[1]||(d[1]=n=>e.state.filter.type=n)},[X,(s(!0),a(p,null,x(e.literaries,n=>(s(),a("option",{key:n.id,class:"",value:n.id},g(`(${n.count}) - ${n.name}`),9,Z))),128))],512),[[B,e.state.filter.type]]),e.map?b("",!0):(s(),a("div",{key:0,onClick:d[2]||(d[2]=n=>e.state.view=e.state.view==="list"?"card":"list"),class:"expand d-block text-decoration-none"},[e.state.view==="list"?(s(),a("i",ee)):(s(),a("i",te))]))])]))}},se={class:"event1"},ae=["src"],ne={class:"dtails"},le={class:"title"},ie={key:0,class:"badge bg-brand text-light me-2"},oe={class:"text-muted small mt-2"},re={class:"d-flex justify-content-between align-items-center mt-3"},de={class:"partner"},ce=["src"],ue={class:"d-flex"},ve={key:0,class:"date text-end"},me={class:"ms-0"},ge=t("i",{class:"fa-regular fa-calendar-days ms-2"},null,-1),he=t("br",null,null,-1),be={class:"d-flex flex-row-reverse align-items-center"},_e=t("i",{class:"fa-regular fa-clock ms-2"},null,-1),fe={dir:"ltr"},ye={key:0,class:"d-flex align-items-center me-3"},$e=t("i",{class:"fa-solid fa-couch ms-2 text-danger"},null,-1),pe={key:1,class:"d-flex align-items-center me-3"},xe=t("i",{class:"fa-solid fa-couch ms-2 text-secondary"},null,-1),ke=t("div",{class:"atendees"},[t("div",{class:"number"}),t("div",{class:"actions"})],-1),L={__name:"EventList",props:{event:{type:Object,required:!0}},setup(e){const{getUser:r}=I();return(d,n)=>{var i,v,c,l,m,_,h;const u=A("router-link");return s(),a("div",se,[t("img",{class:"img",src:e.event.image?e.event.image:o(Y),alt:"image"},null,8,ae),t("div",ne,[t("div",null,[t("div",le,[$(u,{to:{name:"event-details",params:{id:e.event.id}},class:"fw-semibold"},{default:M(()=>[f(g(e.event.title??"N/A")+" ",1),o(r)&&e.event.goings.includes(o(r).id)?(s(),a("span",ie," محجوز ")):b("",!0)]),_:1},8,["to"]),t("div",oe,g(e.event.description??"N/A"),1)])]),t("div",re,[t("div",de,[t("img",{src:(v=(i=e.event)==null?void 0:i.partner)==null?void 0:v.logo,alt:"partner-logo"},null,8,ce),t("div",ue,[f(g(((l=(c=e.event)==null?void 0:c.partner)==null?void 0:l.name)??"N/A")+" ",1),t("span",null,g(((_=(m=e.event)==null?void 0:m.partner)==null?void 0:_.city)??"N/A"),1)])]),(h=e.event)!=null&&h.start_date?(s(),a("div",ve,[t("span",me,g(o(N)(e.event.start_date).format("DD-MM-YYYY")),1),ge,he,t("div",be,[_e,t("span",fe,g(o(N)(e.event.start_date).format("hh:mm A")),1),e.event.guest_count>=e.event.available_seats?(s(),a("div",ye,[f(" إنتهت "),$e])):(s(),a("div",pe,[f(g(e.event.available_seats-e.event.guest_count)+" ",1),xe]))])])):b("",!0)]),ke])])}}},qe={class:"event2"},we={class:"title"},Me={key:0,class:"badge bg-brand text-light me-2"},Ne=["src"],Ee={class:"dtails"},je={class:"d-flex justify-content-between align-items-center mt-3"},Ae={class:"partner"},Ce=["src"],Fe={class:"d-flex"},Be={class:"date text-end"},De={class:"ms-0"},Ie=t("i",{class:"fa-regular fa-calendar-days ms-2"},null,-1),Pe=t("br",null,null,-1),Ye={class:"d-flex flex-row-reverse align-items-center"},Ue=t("i",{class:"fa-regular fa-clock ms-2"},null,-1),Oe={dir:"ltr"},Le={key:0,class:"d-flex align-items-center me-3"},Re=t("i",{class:"fa-solid fa-couch ms-2 text-secondary"},null,-1),Se={key:1,class:"d-flex align-items-center me-3"},Ve=t("i",{class:"fa-solid fa-couch ms-2 text-danger"},null,-1),ze=t("div",{class:"atendees"},[t("div",{class:"number"}),t("div",{class:"actions"})],-1),R={__name:"EventCard",props:{event:{type:Object,required:!0}},setup(e){const{getUser:r}=I();return(d,n)=>{var i,v,c,l,m,_;const u=A("router-link");return s(),a("div",qe,[t("div",we,[$(u,{to:{name:"event-details",params:{id:e.event.id}},class:"fw-semibold"},{default:M(()=>[f(g(e.event.title??"N/A")+" ",1),e.event.goings.includes(o(r).id)?(s(),a("span",Me," محجوز ")):b("",!0)]),_:1},8,["to"])]),$(u,{to:{name:"event-details",params:{id:e.event.id}}},{default:M(()=>[t("img",{class:"img",src:e.event.image?e.event.image:o(Y)},null,8,Ne)]),_:1},8,["to"]),t("div",Ee,[t("div",je,[t("div",Ae,[t("img",{src:(v=(i=e.event)==null?void 0:i.partner)==null?void 0:v.logo,alt:"partner logo"},null,8,Ce),t("div",Fe,[f(g(((l=(c=e.event)==null?void 0:c.partner)==null?void 0:l.name)??"N/A")+" ",1),t("span",null,g(((_=(m=e.event)==null?void 0:m.partner)==null?void 0:_.city)??"N/A"),1)])]),t("div",Be,[t("span",De,g(o(N)(e.event.start_date).format("DD-MM-YYYY")),1),Ie,Pe,t("div",Ye,[Ue,t("span",Oe,g(o(N)(e.event.start_date).format("hh:mm A")),1),e.event.guest_count<=e.event.available_seats?(s(),a("div",Le,[f(g(e.event.available_seats-e.event.guest_count)+" ",1),Re])):(s(),a("div",Se,[f(" إنتهت "),Ve]))])])]),ze])])}}},Te={class:"tab-pane fade show active",id:"home-tab-pane",role:"tabpanel","aria-labelledby":"home-tab",tabindex:"0"},Ge=t("h2",{class:"my-4 d-flex justify-content-between align-items-center"},[f(" فعاليات قريبة منك في جدة "),t("a",{href:"/events/map",class:"btn btn-light"},[t("i",{class:"fa-solid fa-location-dot"}),f(" عرض الخريطة")])],-1),Qe={key:0,class:"text-center my-4"},He=t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),Je=[He],Ke={key:3,class:"alert alert-info text-center"},We={key:4,class:"text-center mt-4"},Xe=["disabled"],Ze={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},et={role:"status"},tt={__name:"Upcoming",props:{events:{type:Array,required:!0},loading:{type:Boolean,required:!0},loadingMore:{type:Boolean,required:!0},state:{type:Object,required:!0}},setup(e){const r=C(),d=q(),{data:n}=U("upcoming"),u=()=>{const i=d.query.pageN??1;r.push({query:{...d.query,pageN:Number(i)+1}})};return(i,v)=>{var c;return s(),a("div",Te,[Ge,$(O,{state:e.state,literaries:(c=o(n))==null?void 0:c.data},null,8,["state","literaries"]),e.loading?(s(),a("div",Qe,Je)):b("",!0),e.state.view==="list"&&!e.loading?(s(!0),a(p,{key:1},x(e.events,l=>(s(),k(L,{key:l.id,event:l},null,8,["event"]))),128)):e.state.view==="card"&&!e.loading?(s(!0),a(p,{key:2},x(e.events,(l,m)=>(s(),k(R,{key:l.index,event:l},null,8,["event"]))),128)):b("",!0),!e.loading&&!e.events.length?(s(),a("div",Ke," لا يوجد فعاليات متاحة حالياً ")):b("",!0),e.state.meta.total>e.events.length?(s(),a("div",We,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:v[0]||(v[0]=l=>u()),disabled:e.loadingMore||e.loading},[e.loadingMore?(s(),a("span",Ze)):b("",!0),t("span",et,g(e.loadingMore?"جاري التحميل":"عرض المزيد"),1)],8,Xe)])):b("",!0)])}}},st={class:"tab-pane fade",id:"profile-tab-pane",role:"tabpanel","aria-labelledby":"profile-tab",tabindex:"0"},at=t("h2",{class:"my-4 d-flex justify-content-between align-items-center"},[f(" فعاليات قريبة منك في جدة "),t("a",{href:"/events/map",class:"btn btn-light"},[t("i",{class:"fa-solid fa-location-dot"}),f(" عرض الخريطة")])],-1),nt={key:0,class:"text-center my-4"},lt=t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),it=[lt],ot={key:3,class:"alert alert-info text-center"},rt={class:"text-center mt-4"},dt=["disabled"],ct={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},ut={role:"status"},vt={__name:"Past",props:{events:{type:Array,required:!0},loading:{type:Boolean,required:!0},loadingMore:{type:Boolean,required:!0},state:{type:Object,required:!0}},setup(e){const r=C(),d=q(),{data:n}=U("past"),u=()=>{const i=d.query.pageP??1;r.push({query:{...d.query,pageP:Number(i)+1}})};return(i,v)=>{var c;return s(),a("div",st,[at,$(O,{state:e.state,literaries:(c=o(n))==null?void 0:c.data},null,8,["state","literaries"]),e.loading?(s(),a("div",nt,it)):b("",!0),e.state.view==="list"&&!e.loading?(s(!0),a(p,{key:1},x(e.events,l=>(s(),k(L,{key:l.id,event:l},null,8,["event"]))),128)):e.state.view==="card"&&!e.loading?(s(!0),a(p,{key:2},x(e.events,(l,m)=>(s(),k(R,{key:l.index,event:l},null,8,["event"]))),128)):b("",!0),!e.loading&&!e.events.length?(s(),a("div",ot," لا يوجد فعاليات متاحة حالياً ")):b("",!0),t("div",rt,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:v[0]||(v[0]=l=>u()),disabled:e.loadingMore||e.loading},[e.loadingMore?(s(),a("span",ct)):b("",!0),t("span",ut,g(e.loadingMore?"جاري التحميل":"عرض المزيد"),1)],8,dt)])])}}},mt="/i/assets/event-08-rsnpQB_z.png",gt="/i/assets/event-09-pgwkdRdF.png",ht={id:"carouselExampleIndicators",class:"carousel slide","data-bs-ride":"carousel"},bt=t("div",{class:"carousel-indicators"},[t("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":"0",class:"active","aria-current":"true","aria-label":""}),t("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":"1","aria-label":""}),t("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":"2","aria-label":""})],-1),_t={class:"carousel-inner"},ft=["data-bs-interval"],yt=t("div",{class:"d-none text-white bg-dark px-3 py-2 position-absolute top-0 start-0 m-2 rounded shadow text-center"},null,-1),$t={key:1},pt={class:"carousel-item active text-center","data-bs-interval":"100000"},xt={class:"carousel-item"},kt=D('<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev"><span class="carousel-control-prev-icon" aria-hidden="true"></span><span class="visually-hidden">السابق</span></button><button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next"><span class="carousel-control-next-icon" aria-hidden="true"></span><span class="visually-hidden">التالي</span></button>',2),qt={__name:"Carousel",props:{events:{type:Object,required:!0}},setup(e){const r=e;return(d,n)=>{const u=A("router-link");return s(),a("div",ht,[bt,t("div",_t,[r.events.length?(s(!0),a(p,{key:0},x(r.events,i=>(s(),a("div",{key:i.id,class:G(["carousel-item",{active:i.id===r.events[0].id}]),"data-bs-interval":i.id===r.events[0].id?"10000":"2000"},[$(u,{to:{name:"event-details",params:{id:i.id}}},{default:M(()=>[t("a",{class:"img",style:E({"background-image":`url(${i.image})`})},null,4)]),_:2},1032,["to"]),yt],10,ft))),128)):(s(),a("div",$t,[t("div",pt,[t("div",{class:"img",style:E({"background-image":`url(${o(mt)})`})},null,4)]),t("div",xt,[t("div",{class:"img",style:E({"background-image":`url(${o(gt)})`})},null,4)])]))]),kt])}}},wt=e=>{const r=q(),d=C(),n=y([]),u=y([]),i=y(!1),v=y(!1),c=Q({carousel:[],view:"list",search:"أدبيات",filter:{date_range:r.query.date||"",type:r.query.type||""},meta:{}});j(()=>r.query.pageN,m=>{l(m)});const l=async(m,_=!0)=>{let h="";c.filter.date_range&&(h+="&date_range="+c.filter.date_range),c.filter.type&&(h+="&type="+c.filter.type);const{data:w,error:S,isFetching:It,onFetchResponse:V}=P("events/upcoming?page="+m+h).json();n.value.length===0?i.value=!0:v.value=!0,V(z=>{z.status===200&&(i.value=!1,v.value=!1,_?n.value=[...n.value,...w.value.data]:n.value=w.value.data,c.meta=w.value.meta,u.value=n.value.filter((T,Pt)=>!T.default_image).slice(0,3))})};return j(()=>c.filter,async(m,_)=>{let h={};m.date_range&&(h.date=m.date_range),m.type&&(h.type=m.type),h.pageN=1,await d.push({query:{...r.query,...h}}),await l(e.value,!1)},{deep:!0}),l(e.value),{events:n,loading:i,loadingMore:v,carousel:u,state:c}},Mt=e=>{const r=q(),d=y([]),n=y(!1),u=y(!1);j(()=>r.query.pageP,v=>{i(v)});const i=async v=>{const{data:c,error:l,isFetching:m,onFetchResponse:_}=P("events/past?page="+v).json();d.value.length===0?n.value=!0:u.value=!0,_(h=>{h.status===200&&(n.value=!1,u.value=!1,d.value=[...d.value,...c.value.data])})};return i(e.value),{events:d,loading:n,loadingMore:u}},Nt={class:"home"},Et={class:"container wrapper mt-3"},jt={class:"nav nav-tabs mt-4",id:"myTab",role:"tablist"},At={class:"nav-item",role:"presentation"},Ct={class:"nav-link active",id:"home-tab","data-bs-toggle":"tab","data-bs-target":"#home-tab-pane",type:"button",role:"tab","aria-controls":"home-tab-pane","aria-selected":"true"},Ft={class:"nav-item",role:"presentation"},Bt={class:"nav-link",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#profile-tab-pane",type:"button",role:"tab","aria-controls":"profile-tab-pane","aria-selected":"false"},Dt={class:"tab-content py-4",id:"myTabContent"},St={__name:"Events",setup(e){const r=q(),d=y(Number(r.query.pageN)||1),n=y(Number(r.query.pageP)||1),{events:u,loading:i,loadingMore:v,carousel:c,state:l}=wt(d),{events:m,loading:_,loadingMore:h}=Mt(n);return(w,S)=>(s(),a("div",null,[t("div",Nt,[t("div",Et,[o(u).length?(s(),k(qt,{key:0,events:o(c)},null,8,["events"])):b("",!0),t("ul",jt,[t("li",At,[t("button",Ct," الفعاليات القادمة ("+g(o(u).length)+") ",1)]),t("li",Ft,[t("button",Bt," الفعاليات المنتهية ("+g(o(m).length)+") ",1)])]),t("div",Dt,[$(tt,{events:o(u),loading:o(i),state:o(l),loadingMore:o(v)},null,8,["events","loading","state","loadingMore"]),$(vt,{events:o(m),loading:o(_),state:o(l),loadingMore:o(h)},null,8,["events","loading","state","loadingMore"])])])])]))}};export{St as default};
